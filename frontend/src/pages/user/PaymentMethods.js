// Payment Methods Component - Bharatshala Platform
import React, { useState, useEffect } from 'react';
import { Helmet } from 'react-helmet-async';
import { motion } from 'framer-motion';
import { useAnalytics } from '../../utils/analytics';
import apiService from '../../utils/api';
import LoadingSpinner from '../../components/LoadingSpinner';

const PaymentMethods = () => {
  const { trackEvent, trackPageView } = useAnalytics();
  const [paymentMethods, setPaymentMethods] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showAddForm, setShowAddForm] = useState(false);
  const [selectedType, setSelectedType] = useState('card');

  const [cardForm, setCardForm] = useState({
    type: 'credit',
    cardNumber: '',
    expiryMonth: '',
    expiryYear: '',
    holderName: '',
    isDefault: false
  });

  const [upiForm, setUpiForm] = useState({
    upiId: '',
    holderName: '',
    isDefault: false
  });

  const paymentTypes = [
    { id: 'card', name: '‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'üí≥', description: '‡§°‡•á‡§¨‡§ø‡§ü/‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§°' },
    { id: 'upi', name: 'UPI', icon: 'üì±', description: '‡§Ø‡•Ç‡§™‡•Ä‡§Ü‡§à ‡§Ü‡§à‡§°‡•Ä' },
    { id: 'netbanking', name: '‡§®‡•á‡§ü ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó', icon: 'üè¶', description: '‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó' },
    { id: 'wallet', name: '‡§µ‡•â‡§≤‡•á‡§ü', icon: 'üëõ', description: '‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§µ‡•â‡§≤‡•á‡§ü' }
  ];

  const cardTypes = [
    { value: 'credit', label: '‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§°' },
    { value: 'debit', label: '‡§°‡•á‡§¨‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§°' }
  ];

  const months = [
    { value: '01', label: '01 - ‡§ú‡§®‡§µ‡§∞‡•Ä' },
    { value: '02', label: '02 - ‡§´‡§∞‡§µ‡§∞‡•Ä' },
    { value: '03', label: '03 - ‡§Æ‡§æ‡§∞‡•ç‡§ö' },
    { value: '04', label: '04 - ‡§Ö‡§™‡•ç‡§∞‡•à‡§≤' },
    { value: '05', label: '05 - ‡§Æ‡§à' },
    { value: '06', label: '06 - ‡§ú‡•Ç‡§®' },
    { value: '07', label: '07 - ‡§ú‡•Å‡§≤‡§æ‡§à' },
    { value: '08', label: '08 - ‡§Ö‡§ó‡§∏‡•ç‡§§' },
    { value: '09', label: '09 - ‡§∏‡§ø‡§§‡§Ç‡§¨‡§∞' },
    { value: '10', label: '10 - ‡§Ö‡§ï‡•ç‡§ü‡•Ç‡§¨‡§∞' },
    { value: '11', label: '11 - ‡§®‡§µ‡§Ç‡§¨‡§∞' },
    { value: '12', label: '12 - ‡§¶‡§ø‡§∏‡§Ç‡§¨‡§∞' }
  ];

  const currentYear = new Date().getFullYear();
  const years = Array.from({ length: 10 }, (_, i) => ({
    value: (currentYear + i).toString(),
    label: (currentYear + i).toString()
  }));

  useEffect(() => {
    trackPageView('payment_methods');
    loadPaymentMethods();
  }, []);

  const loadPaymentMethods = async () => {
    try {
      setLoading(true);
      const response = await apiService.get('/user/payment-methods');
      if (response.success) {
        setPaymentMethods(response.data);
      }
    } catch (error) {
      console.error('Failed to load payment methods:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleAddPaymentMethod = async (e) => {
    e.preventDefault();
    
    try {
      const data = selectedType === 'card' ? cardForm : upiForm;
      const response = await apiService.post('/user/payment-methods', {
        type: selectedType,
        ...data
      });

      if (response.success) {
        await loadPaymentMethods();
        setShowAddForm(false);
        resetForms();
        trackEvent('payment_method_added', { type: selectedType });
        alert('‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ!');
      }
    } catch (error) {
      console.error('Failed to add payment method:', error);
      alert('‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à');
    }
  };

  const handleDeletePaymentMethod = async (methodId) => {
    if (window.confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§á‡§∏ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) {
      try {
        const response = await apiService.delete(`/user/payment-methods/${methodId}`);
        if (response.success) {
          await loadPaymentMethods();
          trackEvent('payment_method_deleted');
          alert('‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§π‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!');
        }
      } catch (error) {
        console.error('Failed to delete payment method:', error);
        alert('‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§π‡§ü‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à');
      }
    }
  };

  const handleSetDefault = async (methodId) => {
    try {
      const response = await apiService.patch(`/user/payment-methods/${methodId}/set-default`);
      if (response.success) {
        await loadPaymentMethods();
        trackEvent('payment_method_set_default');
      }
    } catch (error) {
      console.error('Failed to set default payment method:', error);
    }
  };

  const resetForms = () => {
    setCardForm({
      type: 'credit',
      cardNumber: '',
      expiryMonth: '',
      expiryYear: '',
      holderName: '',
      isDefault: false
    });
    setUpiForm({
      upiId: '',
      holderName: '',
      isDefault: false
    });
  };

  const formatCardNumber = (number) => {
    return number.replace(/\d{4}(?=\d)/g, '$& ');
  };

  const maskCardNumber = (number) => {
    if (!number) return '';
    const cleaned = number.replace(/\s/g, '');
    const masked = '*'.repeat(cleaned.length - 4) + cleaned.slice(-4);
    return formatCardNumber(masked);
  };

  const getCardBrand = (number) => {
    const cleaned = number.replace(/\s/g, '');
    if (cleaned.startsWith('4')) return 'Visa';
    if (cleaned.startsWith('5')) return 'Mastercard';
    if (cleaned.startsWith('3')) return 'Amex';
    if (cleaned.startsWith('6')) return 'RuPay';
    return 'Card';
  };

  if (loading) {
    return (
      <div className="flex justify-center items-center h-64">
        <LoadingSpinner size="large" text="‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§°‡•ç‡§∏ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç..." />
      </div>
    );
  }

  return (
    <>
      <Helmet>
        <title>‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§°‡•ç‡§∏ - ‡§≠‡§æ‡§∞‡§§‡§∂‡§æ‡§≤‡§æ | Payment Methods</title>
        <meta name="description" content="‡§Ö‡§™‡§®‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§°‡•ç‡§∏ ‡§Æ‡•à‡§®‡•á‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ï‡§æ‡§∞‡•ç‡§°, UPI ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç ‡§Ø‡§æ ‡§π‡§ü‡§æ‡§è‡§Ç‡•§" />
        <meta name="robots" content="noindex, follow" />
      </Helmet>

      <div className="min-h-screen bg-gray-50 p-6">
        <div className="max-w-4xl mx-auto">
          {/* Header */}
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-2xl font-bold text-gray-900">‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§°‡•ç‡§∏</h1>
                <p className="text-gray-600">‡§Ö‡§™‡§®‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§Æ‡•à‡§®‡•á‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
              </div>
              <button
                onClick={() => setShowAddForm(true)}
                className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200"
              >
                + ‡§®‡§Ø‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
              </button>
            </div>
          </div>

          {/* Add Payment Method Form */}
          {showAddForm && (
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              className="bg-white rounded-lg shadow-lg p-6 mb-6"
            >
              <h2 className="text-xl font-bold text-gray-900 mb-4">‡§®‡§Ø‡§æ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h2>
              
              {/* Payment Type Selection */}
              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ü‡§æ‡§á‡§™ ‡§ö‡•Å‡§®‡•á‡§Ç
                </label>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                  {paymentTypes.map((type) => (
                    <button
                      key={type.id}
                      type="button"
                      onClick={() => setSelectedType(type.id)}
                      className={`p-3 border rounded-lg text-center transition-colors duration-200 ${
                        selectedType === type.id
                          ? 'border-green-500 bg-green-50 text-green-700'
                          : 'border-gray-300 text-gray-700 hover:bg-gray-50'
                      }`}
                    >
                      <div className="text-2xl mb-1">{type.icon}</div>
                      <div className="font-medium">{type.name}</div>
                      <div className="text-xs text-gray-500">{type.description}</div>
                    </button>
                  ))}
                </div>
              </div>

              {/* Card Form */}
              {selectedType === 'card' && (
                <form onSubmit={handleAddPaymentMethod} className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ü‡§æ‡§á‡§™
                    </label>
                    <select
                      value={cardForm.type}
                      onChange={(e) => setCardForm({...cardForm, type: e.target.value})}
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      {cardTypes.map((type) => (
                        <option key={type.value} value={type.value}>{type.label}</option>
                      ))}
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§Ç‡§¨‡§∞
                    </label>
                    <input
                      type="text"
                      maxLength="19"
                      value={formatCardNumber(cardForm.cardNumber)}
                      onChange={(e) => setCardForm({...cardForm, cardNumber: e.target.value.replace(/\s/g, '')})}
                      placeholder="1234 5678 9012 3456"
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                      required
                    />
                  </div>

                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        ‡§Æ‡§π‡•Ä‡§®‡§æ
                      </label>
                      <select
                        value={cardForm.expiryMonth}
                        onChange={(e) => setCardForm({...cardForm, expiryMonth: e.target.value})}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                        required
                      >
                        <option value="">‡§Æ‡§π‡•Ä‡§®‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                        {months.map((month) => (
                          <option key={month.value} value={month.value}>{month.label}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        ‡§∏‡§æ‡§≤
                      </label>
                      <select
                        value={cardForm.expiryYear}
                        onChange={(e) => setCardForm({...cardForm, expiryYear: e.target.value})}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                        required
                      >
                        <option value="">‡§∏‡§æ‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                        {years.map((year) => (
                          <option key={year.value} value={year.value}>{year.label}</option>
                        ))}
                      </select>
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ‡§ï‡§æ‡§∞‡•ç‡§°‡§π‡•ã‡§≤‡•ç‡§°‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ
                    </label>
                    <input
                      type="text"
                      value={cardForm.holderName}
                      onChange={(e) => setCardForm({...cardForm, holderName: e.target.value})}
                      placeholder="‡§ú‡•à‡§∏‡§æ ‡§ï‡§ø ‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡§∞ ‡§≤‡§ø‡§ñ‡§æ ‡§π‡•à"
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                      required
                    />
                  </div>

                  <div className="flex items-center">
                    <input
                      type="checkbox"
                      id="cardDefault"
                      checked={cardForm.isDefault}
                      onChange={(e) => setCardForm({...cardForm, isDefault: e.target.checked})}
                      className="mr-2"
                    />
                    <label htmlFor="cardDefault" className="text-sm text-gray-700">
                      ‡§á‡§∏‡•á ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§¨‡§®‡§æ‡§è‡§Ç
                    </label>
                  </div>

                  <div className="flex space-x-4">
                    <button
                      type="submit"
                      className="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200"
                    >
                      ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
                    </button>
                    <button
                      type="button"
                      onClick={() => setShowAddForm(false)}
                      className="bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition-colors duration-200"
                    >
                      ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                  </div>
                </form>
              )}

              {/* UPI Form */}
              {selectedType === 'upi' && (
                <form onSubmit={handleAddPaymentMethod} className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      UPI ID
                    </label>
                    <input
                      type="text"
                      value={upiForm.upiId}
                      onChange={(e) => setUpiForm({...upiForm, upiId: e.target.value})}
                      placeholder="yourname@paytm / yourname@gpay"
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                      required
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ‡§ñ‡§æ‡§§‡§æ‡§ß‡§æ‡§∞‡§ï ‡§ï‡§æ ‡§®‡§æ‡§Æ
                    </label>
                    <input
                      type="text"
                      value={upiForm.holderName}
                      onChange={(e) => setUpiForm({...upiForm, holderName: e.target.value})}
                      placeholder="‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ"
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                      required
                    />
                  </div>

                  <div className="flex items-center">
                    <input
                      type="checkbox"
                      id="upiDefault"
                      checked={upiForm.isDefault}
                      onChange={(e) => setUpiForm({...upiForm, isDefault: e.target.checked})}
                      className="mr-2"
                    />
                    <label htmlFor="upiDefault" className="text-sm text-gray-700">
                      ‡§á‡§∏‡•á ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§¨‡§®‡§æ‡§è‡§Ç
                    </label>
                  </div>

                  <div className="flex space-x-4">
                    <button
                      type="submit"
                      className="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200"
                    >
                      UPI ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
                    </button>
                    <button
                      type="button"
                      onClick={() => setShowAddForm(false)}
                      className="bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition-colors duration-200"
                    >
                      ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                  </div>
                </form>
              )}

              {/* Other payment types message */}
              {!['card', 'upi'].includes(selectedType) && (
                <div className="text-center py-8">
                  <div className="text-4xl mb-4">üöß</div>
                  <h3 className="text-lg font-semibold text-gray-900 mb-2">‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§π‡•à</h3>
                  <p className="text-gray-600">‡§Ø‡§π ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã‡§ó‡§æ</p>
                </div>
              )}
            </motion.div>
          )}

          {/* Payment Methods List */}
          <div className="bg-white rounded-lg shadow-lg overflow-hidden">
            {paymentMethods.length === 0 ? (
              <div className="text-center py-12">
                <div className="text-4xl mb-4">üí≥</div>
                <h3 className="text-xl font-semibold text-gray-900 mb-2">‡§ï‡•ã‡§à ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ</h3>
                <p className="text-gray-600 mb-4">‡§Ö‡§™‡§®‡§æ ‡§™‡§π‡§≤‡§æ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</p>
                <button
                  onClick={() => setShowAddForm(true)}
                  className="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200"
                >
                  ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡•á‡§•‡§° ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
                </button>
              </div>
            ) : (
              <div className="divide-y divide-gray-200">
                {paymentMethods.map((method, index) => (
                  <motion.div
                    key={method.id}
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: index * 0.1 }}
                    className="p-6"
                  >
                    <div className="flex items-center justify-between">
                      <div className="flex items-center space-x-4">
                        <div className="text-3xl">
                          {method.type === 'card' ? 'üí≥' : 
                           method.type === 'upi' ? 'üì±' : 
                           method.type === 'netbanking' ? 'üè¶' : 'üëõ'}
                        </div>
                        <div>
                          <div className="flex items-center space-x-2">
                            <h3 className="font-semibold text-gray-900">
                              {method.type === 'card' ? 
                                `${getCardBrand(method.cardNumber)} ${method.cardType}` :
                                method.type === 'upi' ? 'UPI' : method.type}
                            </h3>
                            {method.isDefault && (
                              <span className="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">
                                ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü
                              </span>
                            )}
                          </div>
                          <p className="text-gray-600">
                            {method.type === 'card' ? 
                              maskCardNumber(method.cardNumber) : 
                              method.upiId || method.accountNumber}
                          </p>
                          <p className="text-sm text-gray-500">{method.holderName}</p>
                          {method.type === 'card' && (
                            <p className="text-sm text-gray-500">
                              ‡§è‡§ï‡•ç‡§∏‡§™‡§æ‡§Ø‡§∞‡•Ä: {method.expiryMonth}/{method.expiryYear}
                            </p>
                          )}
                        </div>
                      </div>
                      
                      <div className="flex items-center space-x-2">
                        {!method.isDefault && (
                          <button
                            onClick={() => handleSetDefault(method.id)}
                            className="text-blue-600 hover:text-blue-800 text-sm"
                          >
                            ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç
                          </button>
                        )}
                        <button
                          onClick={() => handleDeletePaymentMethod(method.id)}
                          className="text-red-600 hover:text-red-800 p-2"
                          title="‡§π‡§ü‡§æ‡§è‡§Ç"
                        >
                          üóëÔ∏è
                        </button>
                      </div>
                    </div>
                  </motion.div>
                ))}
              </div>
            )}
          </div>

          {/* Security Notice */}
          <div className="bg-blue-50 rounded-lg p-6 mt-6">
            <div className="flex items-start space-x-3">
              <div className="text-2xl">üîí</div>
              <div>
                <h3 className="font-semibold text-blue-900 mb-2">‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§∏‡•Ç‡§ö‡§®‡§æ</h3>
                <ul className="text-blue-800 text-sm space-y-1">
                  <li>‚Ä¢ ‡§Ü‡§™‡§ï‡•Ä ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä 256-‡§¨‡§ø‡§ü SSL ‡§è‡§®‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§∂‡§® ‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§π‡•à</li>
                  <li>‚Ä¢ ‡§π‡§Æ ‡§Ü‡§™‡§ï‡§æ CVV ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç</li>
                  <li>‚Ä¢ ‡§∏‡§≠‡•Ä ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡§º‡•à‡§ï‡•ç‡§∂‡§® PCI DSS ‡§ï‡•â‡§Æ‡•ç‡§™‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§π‡•à‡§Ç</li>
                  <li>‚Ä¢ ‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§§‡•Ä‡§∏‡§∞‡•á ‡§™‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§ù‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
};

export default PaymentMethods;