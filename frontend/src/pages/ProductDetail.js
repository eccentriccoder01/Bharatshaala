import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useCart } from '../hooks/useCart';
import { useAuth } from '../hooks/useAuth';
import { useAPI } from '../hooks/useAPI';
import { useNotification } from '../hooks/useNotification';
import { useRecentlyViewed } from '../hooks/useLocalStorage';
import QuantitySelector from '../components/QuantitySelector';
import ReviewCard from '../components/ReviewCard';
import LoadingSpinner from '../components/LoadingSpinner';

const ProductDetail = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const { addToCart, isItemInCart, getItemQuantity } = useCart();
  const { isAuthenticated } = useAuth();
  const { get } = useAPI();
  const { showSuccess, showError } = useNotification();
  const { addItem: addToRecentlyViewed } = useRecentlyViewed();

  const [product, setProduct] = useState(null);
  const [loading, setLoading] = useState(true);
  const [selectedImage, setSelectedImage] = useState(0);
  const [quantity, setQuantity] = useState(1);
  const [selectedVariant, setSelectedVariant] = useState(null);
  const [reviews, setReviews] = useState([]);
  const [showReviews, setShowReviews] = useState(false);
  const [pincode, setPincode] = useState('');
  const [deliveryInfo, setDeliveryInfo] = useState(null);
  const [similarProducts, setSimilarProducts] = useState([]);
  const [activeTab, setActiveTab] = useState('description');

  useEffect(() => {
    if (id) {
      loadProduct();
    }
  }, [id]);

  const loadProduct = async () => {
    setLoading(true);
    try {
      const response = await get(`/products/${id}`);
      if (response.success) {
        setProduct(response.product);
        setSelectedVariant(response.product.variants?.[0] || null);
        addToRecentlyViewed(response.product);
        loadReviews();
        loadSimilarProducts();
      }
    } catch (error) {
      console.error('Error loading product:', error);
      // Mock data for demo
      const mockProduct = {
        id: parseInt(id),
        name: 'рдХреБрдВрджрди рдкрд░реНрд▓ рдиреЗрдХрд▓реЗрд╕ рд╕реЗрдЯ',
        nameEn: 'Kundan Pearl Necklace Set',
        description: 'рдкрд╛рд░рдВрдкрд░рд┐рдХ рд░рд╛рдЬрд╕реНрдерд╛рдиреА рдХреБрдВрджрди рдХрд╛рд░реАрдЧрд░реА рдХреЗ рд╕рд╛рде рдореЛрддрд┐рдпреЛрдВ рдХрд╛ рдпрд╣ рдЦреВрдмрд╕реВрд░рдд рд╣рд╛рд░ рд╕реЗрдЯред рд╢рд╛рджреА-рд╡рд┐рд╡рд╛рд╣ рдФрд░ рддреНрдпреЛрд╣рд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХрджрдо рдкрд░рдлреЗрдХреНрдЯред рд╣рд░ рдореЛрддреА рдХреЛ рд╣рд╛рде рд╕реЗ рдЪреБрдирд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдХреБрдВрджрди рдХреА рд╕реЗрдЯрд┐рдВрдЧ рдкреАрдврд╝рд┐рдпреЛрдВ рдкреБрд░рд╛рдиреЗ рдХрд╛рд░реАрдЧрд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рдХреА рдЧрдИ рд╣реИред',
        price: 15999,
        originalPrice: 19999,
        discount: 20,
        images: [
          { url: '/images/items/kundan-necklace-1.jpg', alt: 'рдореБрдЦреНрдп рдЫрд╡рд┐' },
          { url: '/images/items/kundan-necklace-2.jpg', alt: 'рд╕рд╛рдЗрдб рд╡реНрдпреВ' },
          { url: '/images/items/kundan-necklace.jpg', alt: 'рдбрд┐рдЯреЗрд▓ рд╡реНрдпреВ' }
        ],
        rating: 4.6,
        reviewCount: 89,
        inStock: true,
        quantity: 5,
        vendor: {
          id: 'rajasthani-gems',
          name: 'рд░рд╛рдЬрд╕реНрдерд╛рдиреА рдЬреЗрдореНрд╕',
          rating: 4.8,
          location: 'рдЬрдпрдкреБрд░, рд░рд╛рдЬрд╕реНрдерд╛рди',
          responseTime: '2 рдШрдВрдЯреЗ рдХреЗ рдЕрдВрджрд░'
        },
        category: {
          id: 'jewelry',
          name: 'рдЖрднреВрд╖рдг'
        },
        specifications: {
          material: 'рд╕реНрдЯрд░реНрд▓рд┐рдВрдЧ рд╕рд┐рд▓реНрд╡рд░, рдХреБрдВрджрди, рдкрд░реНрд▓',
          weight: '45 рдЧреНрд░рд╛рдо',
          dimensions: '18 рдЗрдВрдЪ (рд╕рдорд╛рдпреЛрдЬреНрдп)',
          care: 'рд╕реВрдЦреЗ рдХрдкрдбрд╝реЗ рд╕реЗ рд╕рд╛рдл рдХрд░реЗрдВ, рдирдореА рд╕реЗ рдмрдЪреЗрдВ',
          warranty: '6 рдорд╣реАрдиреЗ рдХреА рд╡рд╛рд░рдВрдЯреА'
        },
        variants: [
          { id: 1, name: 'рдЧреЛрд▓реНрдб рдкреНрд▓реЗрдЯреЗрдб', price: 15999, inStock: true },
          { id: 2, name: 'рд╕рд┐рд▓реНрд╡рд░ рдкреНрд▓реЗрдЯреЗрдб', price: 12999, inStock: true },
          { id: 3, name: 'рд░реЛрдЬ рдЧреЛрд▓реНрдб', price: 17999, inStock: false }
        ],
        tags: ['рдХреБрдВрджрди', 'рдкрд░реНрд▓', 'рдиреЗрдХрд▓реЗрд╕', 'рд░рд╛рдЬрд╕реНрдерд╛рдиреА', 'рд╣реИрдВрдбрдореЗрдб', 'рд╡реЗрдбрд┐рдВрдЧ'],
        features: [
          '100% рд╣рд╕реНрддрдирд┐рд░реНрдорд┐рдд',
          'рдкреНрд░реАрдорд┐рдпрдо рдкреИрдХреЗрдЬрд┐рдВрдЧ',
          'рдлреНрд░реА рд╣реЛрдо рдбрд┐рд▓реАрд╡рд░реА',
          'рдЖрд╕рд╛рди рд░рд┐рдЯрд░реНрди рдкреЙрд▓рд┐рд╕реА',
          'рдмреАрдЖрдИрдПрд╕ рд╣реЙрд▓рдорд╛рд░реНрдХ'
        ]
      };
      setProduct(mockProduct);
      setSelectedVariant(mockProduct.variants[0]);
      addToRecentlyViewed(mockProduct);
      
      // Mock reviews
      setReviews([
        {
          id: 1,
          userName: 'рдкреНрд░рд┐рдпрд╛ рд╢рд░реНрдорд╛',
          rating: 5,
          comment: 'рдмрд╣реБрдд рд╣реА рдЦреВрдмрд╕реВрд░рдд рдбрд┐рдЬрд╝рд╛рдЗрди рд╣реИред рдХреНрд╡рд╛рд▓рд┐рдЯреА рднреА рдмрд╣реБрдд рдЕрдЪреНрдЫреА рд╣реИред рд╢рд╛рджреА рдореЗрдВ рдкрд╣рдирдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХрджрдо рдкрд░рдлреЗрдХреНрдЯред',
          createdAt: '2024-01-20',
          isVerifiedPurchase: true,
          helpfulVotes: 12
        },
        {
          id: 2,
          userName: 'рдЕрдирд┐рддрд╛ рджреЗрд╡реА',
          rating: 4,
          comment: 'рдЕрдЪреНрдЫрд╛ рдкреНрд░реЛрдбрдХреНрдЯ рд╣реИ рд▓реЗрдХрд┐рди рдереЛрдбрд╝рд╛ рднрд╛рд░реА рд╣реИред рдлреЛрдЯреЛ рдореЗрдВ рдЬрд┐рддрдирд╛ рдЕрдЪреНрдЫрд╛ рджрд┐рдЦ рд░рд╣рд╛ рдерд╛, рд╡реИрд╕рд╛ рд╣реА рдорд┐рд▓рд╛ред',
          createdAt: '2024-01-15',
          isVerifiedPurchase: true,
          helpfulVotes: 8
        }
      ]);
    }
    setLoading(false);
  };

  const loadReviews = async () => {
    // Implementation for loading reviews
  };

  const loadSimilarProducts = async () => {
    // Implementation for loading similar products
  };

  const handleAddToCart = async () => {
    if (!isAuthenticated) {
      navigate('/login');
      return;
    }

    const productToAdd = {
      ...product,
      selectedVariant,
      price: selectedVariant?.price || product.price
    };

    const result = await addToCart(productToAdd, quantity);
    if (result.success) {
      showSuccess('рдХрд╛рд░реНрдЯ рдореЗрдВ рдЬреЛрдбрд╝ рджрд┐рдпрд╛ рдЧрдпрд╛!');
    }
  };

  const handleBuyNow = async () => {
    await handleAddToCart();
    navigate('/checkout');
  };

  const checkDelivery = async () => {
    if (!pincode || pincode.length !== 6) {
      showError('рдХреГрдкрдпрд╛ рд╕рд╣реА рдкрд┐рдирдХреЛрдб рдбрд╛рд▓реЗрдВ');
      return;
    }

    // Mock delivery check
    setDeliveryInfo({
      available: true,
      estimatedDays: '3-5',
      codAvailable: true,
      freeDelivery: true
    });
  };

  const handleImageClick = (index) => {
    setSelectedImage(index);
  };

  const tabs = [
    { id: 'description', name: 'рд╡рд┐рд╡рд░рдг', icon: 'ЁЯУЭ' },
    { id: 'specifications', name: 'рд╕реНрдкреЗрд╕рд┐рдлрд┐рдХреЗрд╢рди', icon: 'ЁЯУЛ' },
    { id: 'reviews', name: `рд╕рдореАрдХреНрд╖рд╛ (${product?.reviewCount || 0})`, icon: 'тнР' },
    { id: 'delivery', name: 'рдбрд┐рд▓реАрд╡рд░реА рдЬрд╛рдирдХрд╛рд░реА', icon: 'ЁЯЪЪ' }
  ];

  if (loading) {
    return <LoadingSpinner message="рдЙрддреНрдкрд╛рдж рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ..." />;
  }

  if (!product) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-gray-800 mb-4">рдЙрддреНрдкрд╛рдж рдирд╣реАрдВ рдорд┐рд▓рд╛</h2>
          <button
            onClick={() => navigate('/markets')}
            className="bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600"
          >
            рдмрд╛рдЬрд╝рд╛рд░ рджреЗрдЦреЗрдВ
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 pt-20">
      <div className="max-w-7xl mx-auto px-6 py-8">
        
        {/* Breadcrumb */}
        <nav className="mb-8">
          <div className="flex items-center space-x-2 text-emerald-600">
            <button onClick={() => navigate('/')} className="hover:text-emerald-700">рд╣реЛрдо</button>
            <span>тА║</span>
            <button onClick={() => navigate('/markets')} className="hover:text-emerald-700">рдмрд╛рдЬрд╝рд╛рд░</button>
            <span>тА║</span>
            <button onClick={() => navigate(`/categories/${product.category.id}`)} className="hover:text-emerald-700">
              {product.category.name}
            </button>
            <span>тА║</span>
            <span className="text-gray-500">{product.name}</span>
          </div>
        </nav>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12">
          
          {/* Product Images */}
          <div>
            {/* Main Image */}
            <div className="bg-white rounded-2xl p-4 shadow-lg mb-4">
              <img
                src={product.images[selectedImage]?.url}
                alt={product.images[selectedImage]?.alt}
                className="w-full h-96 object-cover rounded-xl"
              />
              
              {/* Discount Badge */}
              {product.discount > 0 && (
                <div className="absolute top-6 left-6 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                  {product.discount}% рдЫреВрдЯ
                </div>
              )}
            </div>

            {/* Thumbnail Images */}
            <div className="grid grid-cols-4 gap-3">
              {product.images.map((image, index) => (
                <button
                  key={index}
                  onClick={() => handleImageClick(index)}
                  className={`bg-white rounded-lg p-2 border-2 transition-all duration-200 ${
                    selectedImage === index ? 'border-emerald-500' : 'border-gray-200 hover:border-emerald-300'
                  }`}
                >
                  <img
                    src={image.url}
                    alt={image.alt}
                    className="w-full h-20 object-cover rounded"
                  />
                </button>
              ))}
            </div>
          </div>

          {/* Product Info */}
          <div className="space-y-6">
            
            {/* Title and Rating */}
            <div>
              <h1 className="text-3xl font-bold text-emerald-800 mb-2">{product.name}</h1>
              <p className="text-lg text-gray-600 mb-4">{product.nameEn}</p>
              
              <div className="flex items-center space-x-4 mb-4">
                <div className="flex items-center space-x-1">
                  <div className="flex">
                    {[...Array(5)].map((_, i) => (
                      <span key={i} className={`text-lg ${i < Math.floor(product.rating) ? 'text-yellow-500' : 'text-gray-300'}`}>
                        тнР
                      </span>
                    ))}
                  </div>
                  <span className="text-emerald-600 font-semibold">{product.rating}</span>
                  <span className="text-gray-500">({product.reviewCount} рд╕рдореАрдХреНрд╖рд╛)</span>
                </div>
              </div>
            </div>

            {/* Price */}
            <div className="bg-emerald-50 rounded-xl p-6 border border-emerald-200">
              <div className="flex items-baseline space-x-3">
                <span className="text-3xl font-bold text-emerald-800">
                  тВ╣{selectedVariant?.price?.toLocaleString() || product.price.toLocaleString()}
                </span>
                {product.originalPrice > product.price && (
                  <span className="text-xl text-gray-500 line-through">
                    тВ╣{product.originalPrice.toLocaleString()}
                  </span>
                )}
                {product.discount > 0 && (
                  <span className="bg-green-500 text-white px-2 py-1 rounded text-sm font-bold">
                    {product.discount}% рдмрдЪрдд
                  </span>
                )}
              </div>
              <p className="text-emerald-600 text-sm mt-2">рд╕рднреА рдЯреИрдХреНрд╕ рд╢рд╛рдорд┐рд▓</p>
            </div>

            {/* Variants */}
            {product.variants && product.variants.length > 1 && (
              <div>
                <h3 className="font-semibold text-emerald-800 mb-3">рд╡реЗрд░рд┐рдПрдВрдЯ рдЪреБрдиреЗрдВ:</h3>
                <div className="grid grid-cols-3 gap-3">
                  {product.variants.map((variant) => (
                    <button
                      key={variant.id}
                      onClick={() => setSelectedVariant(variant)}
                      disabled={!variant.inStock}
                      className={`p-3 border-2 rounded-lg text-sm font-medium transition-all duration-200 ${
                        selectedVariant?.id === variant.id
                          ? 'border-emerald-500 bg-emerald-50 text-emerald-700'
                          : variant.inStock
                            ? 'border-gray-200 hover:border-emerald-300'
                            : 'border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed'
                      }`}
                    >
                      {variant.name}
                      <div className="text-xs mt-1">тВ╣{variant.price.toLocaleString()}</div>
                      {!variant.inStock && <div className="text-xs text-red-500">рд╕реНрдЯреЙрдХ рдореЗрдВ рдирд╣реАрдВ</div>}
                    </button>
                  ))}
                </div>
              </div>
            )}

            {/* Quantity Selector */}
            <div>
              <QuantitySelector
                value={quantity}
                min={1}
                max={product.quantity || 10}
                onChange={setQuantity}
                label="рдорд╛рддреНрд░рд╛"
              />
            </div>

            {/* Action Buttons */}
            <div className="space-y-3">
              <button
                onClick={handleAddToCart}
                disabled={!product.inStock}
                className="w-full bg-emerald-500 text-white py-4 rounded-xl font-semibold text-lg hover:bg-emerald-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200"
              >
                {isItemInCart(product.id) ? 
                  `рдХрд╛рд░реНрдЯ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ (${getItemQuantity(product.id)} рдкрд╣рд▓реЗ рд╕реЗ)` : 
                  'рдХрд╛рд░реНрдЯ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ'
                }
              </button>
              
              <button
                onClick={handleBuyNow}
                disabled={!product.inStock}
                className="w-full bg-orange-500 text-white py-4 rounded-xl font-semibold text-lg hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200"
              >
                рдЕрднреА рдЦрд░реАрджреЗрдВ
              </button>
            </div>

            {/* Stock Status */}
            <div className="flex items-center space-x-2">
              <div className={`w-3 h-3 rounded-full ${product.inStock ? 'bg-green-500' : 'bg-red-500'}`}></div>
              <span className={`font-medium ${product.inStock ? 'text-green-600' : 'text-red-600'}`}>
                {product.inStock ? 
                  (product.quantity > 10 ? 'рд╕реНрдЯреЙрдХ рдореЗрдВ рдЙрдкрд▓рдмреНрдз' : `рдХреЗрд╡рд▓ ${product.quantity} рдмрдЪреЗ`) : 
                  'рд╕реНрдЯреЙрдХ рдореЗрдВ рдирд╣реАрдВ'
                }
              </span>
            </div>

            {/* Vendor Info */}
            <div className="bg-white rounded-xl p-4 border border-emerald-200">
              <h3 className="font-semibold text-emerald-800 mb-2">рд╡рд┐рдХреНрд░реЗрддрд╛ рдХреА рдЬрд╛рдирдХрд╛рд░реА</h3>
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">{product.vendor.name}</p>
                  <p className="text-sm text-gray-600">{product.vendor.location}</p>
                  <div className="flex items-center space-x-1 mt-1">
                    <span className="text-yellow-500">тнР</span>
                    <span className="text-sm">{product.vendor.rating}</span>
                    <span className="text-sm text-gray-500">рд░реЗрдЯрд┐рдВрдЧ</span>
                  </div>
                </div>
                <button className="bg-emerald-100 text-emerald-700 px-4 py-2 rounded-lg hover:bg-emerald-200 transition-colors duration-200">
                  рд╕реНрдЯреЛрд░ рджреЗрдЦреЗрдВ
                </button>
              </div>
            </div>
          </div>
        </div>

        {/* Pincode Check */}
        <div className="bg-white rounded-2xl p-6 shadow-lg mb-8">
          <h3 className="font-bold text-emerald-800 mb-4">рдбрд┐рд▓реАрд╡рд░реА рдЪреЗрдХ рдХрд░реЗрдВ</h3>
          <div className="flex space-x-3">
            <input
              type="text"
              placeholder="рдкрд┐рдирдХреЛрдб рдбрд╛рд▓реЗрдВ"
              value={pincode}
              onChange={(e) => setPincode(e.target.value)}
              maxLength={6}
              className="flex-1 px-4 py-3 border border-emerald-200 rounded-lg focus:border-emerald-500 focus:outline-none"
            />
            <button
              onClick={checkDelivery}
              className="bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors duration-200"
            >
              рдЪреЗрдХ рдХрд░реЗрдВ
            </button>
          </div>
          
          {deliveryInfo && (
            <div className="mt-4 p-4 bg-green-50 rounded-lg border border-green-200">
              <div className="flex items-center space-x-2 mb-2">
                <span className="text-green-600">тЬЕ</span>
                <span className="font-semibold text-green-800">рдбрд┐рд▓реАрд╡рд░реА рдЙрдкрд▓рдмреНрдз</span>
              </div>
              <div className="text-sm text-green-700 space-y-1">
                <p>тАв рдЕрдиреБрдорд╛рдирд┐рдд рдбрд┐рд▓реАрд╡рд░реА: {deliveryInfo.estimatedDays} рдХрд╛рд░реНрдпрджрд┐рд╡рд╕</p>
                <p>тАв {deliveryInfo.freeDelivery ? 'рдореБрдлреНрдд рдбрд┐рд▓реАрд╡рд░реА' : 'рдбрд┐рд▓реАрд╡рд░реА рдЪрд╛рд░реНрдЬ рд▓рд╛рдЧреВ'}</p>
                <p>тАв {deliveryInfo.codAvailable ? 'рдХреИрд╢ рдСрди рдбрд┐рд▓реАрд╡рд░реА рдЙрдкрд▓рдмреНрдз' : 'рдХреЗрд╡рд▓ рдСрдирд▓рд╛рдЗрди рднреБрдЧрддрд╛рди'}</p>
              </div>
            </div>
          )}
        </div>

        {/* Product Details Tabs */}
        <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
          
          {/* Tab Headers */}
          <div className="flex border-b border-gray-200">
            {tabs.map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex-1 px-6 py-4 text-center font-medium transition-colors duration-200 ${
                  activeTab === tab.id
                    ? 'text-emerald-600 border-b-2 border-emerald-500 bg-emerald-50'
                    : 'text-gray-600 hover:text-emerald-600'
                }`}
              >
                <span className="mr-2">{tab.icon}</span>
                {tab.name}
              </button>
            ))}
          </div>

          {/* Tab Content */}
          <div className="p-8">
            
            {/* Description Tab */}
            {activeTab === 'description' && (
              <div className="space-y-6">
                <div>
                  <h3 className="text-xl font-bold text-emerald-800 mb-4">рдЙрддреНрдкрд╛рдж рд╡рд┐рд╡рд░рдг</h3>
                  <p className="text-gray-700 leading-relaxed">{product.description}</p>
                </div>
                
                {product.features && (
                  <div>
                    <h4 className="font-semibold text-emerald-800 mb-3">рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ:</h4>
                    <ul className="space-y-2">
                      {product.features.map((feature, index) => (
                        <li key={index} className="flex items-center space-x-2">
                          <span className="text-emerald-500">тЬУ</span>
                          <span>{feature}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
              </div>
            )}

            {/* Specifications Tab */}
            {activeTab === 'specifications' && (
              <div>
                <h3 className="text-xl font-bold text-emerald-800 mb-4">рддрдХрдиреАрдХреА рд╡рд┐рд╡рд░рдг</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {Object.entries(product.specifications).map(([key, value]) => (
                    <div key={key} className="border-b border-gray-200 pb-2">
                      <dt className="font-semibold text-emerald-800 capitalize">{key}:</dt>
                      <dd className="text-gray-700">{value}</dd>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* Reviews Tab */}
            {activeTab === 'reviews' && (
              <div className="space-y-6">
                <div className="flex justify-between items-center">
                  <h3 className="text-xl font-bold text-emerald-800">рдЧреНрд░рд╛рд╣рдХ рд╕рдореАрдХреНрд╖рд╛</h3>
                  <button className="bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600">
                    рд╕рдореАрдХреНрд╖рд╛ рд▓рд┐рдЦреЗрдВ
                  </button>
                </div>
                
                <div className="space-y-4">
                  {reviews.map((review) => (
                    <ReviewCard key={review.id} review={review} />
                  ))}
                </div>
              </div>
            )}

            {/* Delivery Tab */}
            {activeTab === 'delivery' && (
              <div className="space-y-6">
                <h3 className="text-xl font-bold text-emerald-800 mb-4">рдбрд┐рд▓реАрд╡рд░реА рдЬрд╛рдирдХрд╛рд░реА</h3>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="space-y-4">
                    <div className="flex items-center space-x-3">
                      <span className="text-emerald-600 text-xl">ЁЯЪЪ</span>
                      <div>
                        <h4 className="font-semibold">рдореБрдлреНрдд рдбрд┐рд▓реАрд╡рд░реА</h4>
                        <p className="text-gray-600 text-sm">тВ╣499 рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рдСрд░реНрдбрд░ рдкрд░</p>
                      </div>
                    </div>
                    
                    <div className="flex items-center space-x-3">
                      <span className="text-emerald-600 text-xl">ЁЯУж</span>
                      <div>
                        <h4 className="font-semibold">рд╕реБрд░рдХреНрд╖рд┐рдд рдкреИрдХреЗрдЬрд┐рдВрдЧ</h4>
                        <p className="text-gray-600 text-sm">рдкреНрд░реАрдорд┐рдпрдо рдкреИрдХреЗрдЬрд┐рдВрдЧ рдХреЗ рд╕рд╛рде</p>
                      </div>
                    </div>
                  </div>
                  
                  <div className="space-y-4">
                    <div className="flex items-center space-x-3">
                      <span className="text-emerald-600 text-xl">ЁЯФД</span>
                      <div>
                        <h4 className="font-semibold">рдЖрд╕рд╛рди рд░рд┐рдЯрд░реНрди</h4>
                        <p className="text-gray-600 text-sm">7 рджрд┐рди рдХреА рд░рд┐рдЯрд░реНрди рдЧрд╛рд░рдВрдЯреА</p>
                      </div>
                    </div>
                    
                    <div className="flex items-center space-x-3">
                      <span className="text-emerald-600 text-xl">ЁЯТ│</span>
                      <div>
                        <h4 className="font-semibold">рдХреИрд╢ рдСрди рдбрд┐рд▓реАрд╡рд░реА</h4>
                        <p className="text-gray-600 text-sm">рдЙрдкрд▓рдмреНрдз (рдЪреБрдирд┐рдВрджрд╛ рд╢рд╣рд░реЛрдВ рдореЗрдВ)</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default ProductDetail;